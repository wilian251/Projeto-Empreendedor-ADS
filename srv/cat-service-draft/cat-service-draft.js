const cds = require('@sap/cds');
const validation = require('../common/validation')
const loadData = require('../common/loadData')
const crud = require('../common/crud')
const xsenv = require("@sap/xsenv");

class CatalogServiceDraft extends cds.ApplicationService {
    init() {
        
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        // INIT - Instanciando S3                                                           //
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//

        xsenv.loadEnv();

        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        // getEAN - API EAN                                                                 //
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        
        this.on('getEAN',  async (req) => {  
            return await crud.getEANAPI(req);   
        
        }); 
        
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        // loadProducts - action                                                            //
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        
        this.on('loadProducts',  async (req) => {  
             await loadData.loadProducts(req);   
        
        }); 

        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        // loadProducts - functio                                                           //
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        //----------------------------------------------------------------------------------//
        
        this.on('loadProductsGet',  async (req) => {  
            await loadData.loadProducts(req);   
       
       }); 

        
        return super.init();
    }
}

module.exports = { CatalogServiceDraft };
